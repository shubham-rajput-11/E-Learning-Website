{% extends './base.html' %}
<!-- path is related to home.html so ./ is compulsory or alternate : courses/base.html -->
<!--folder with name "courses is created in templates"  -->
{% load course_custom_tags %} {% block title %} Courses {% endblock %} 
{% block content %}
<style>
  .price {
    font-size: 20px;
  }


  #video_list{
     overflow-y: scroll;
  } 
</style>
<div class="container-fluid">
  <div hidden>
    <p class="">selected course : {{course}}</p>
    <p class="">selected course : {{course.name}}</p>
    <p class="">selected course : {{course.description}}</p>
    <p class="">selected course : {{course.price}}</p>
    <p class="">selected course : {{course.video_set.all}}</p>
    <p>
      {% comment %} video_set is refernce or forign key from collection 'videos'
      to the 'courses' like wise 'tag' collection below .all is a method 
      {% endcomment %}
    </p>

    <p class="">selected course : {{course.tag_set.all}}</p>
    <p></p>
    <p class="">selected course : {{course.prerequiste_set.all}}</p>
    <p class="">selected course : {{course.learning_set.all}}</p>
    <p></p>
  </div>


  <div class="row">
    <div class="col-9">
      <div class="mx-auto">
        <iframe
          width="100%"
          height="315"
          src="https://www.youtube.com/embed/jMHcborMf0Q?si=u9J0trjKWm-EE-X9"
          title="YouTube video player"
          frameborder="0"
          allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
          allowfullscreen
        >
        </iframe>
      </div>
    </div>


    <!-- lecture list -->
    <div class="col-3">
      <ul id="video_list"  class="list-group">
        {% for video in course.video_set.all %}
        <li class="list-group-item">
          <a href=""> {{video}} </a>
        </li>
        {% endfor %}
        
      </ul>
    </div>
  </div>

  <div class="row"></div>

  <!-- course details  -->

  <div class="mt-3">
    <br />
    <div class="card">
      <div class="card-body">
        <h5 class="card-title">{{course.name}}</h5>
        <p class="card-text">{{course.description}}</p>
      </div>
    </div>

    <!-- Prerequisites -->
    <div class="card">
      <div class="card-body">
        <h5 class="card-title">Prerequisite</h5>
        <p class="card-text">
          {% for pre in course.prerequisite_set.all %}
          <li class="list-group-item">{{pre.desription}}</li>
          {% endfor %}
        </p>
      </div>
    </div>

    <!-- Learnings -->
    <div class="card">
      <div class="card-body">
        <h5 class="card-title">Learning</h5>
        <p class="card-text">
          {% for learning in course.learning_set.all %}
          <li class="list-group-item">{{learning.desription}}</li>
          {% endfor %}
        </p>
      </div>
    </div>
    <br />
    <br />
  </div>
</div>

<!--  h = w*9/16-->

<script>
  var player;
 
  var video_list;
  document.onreadystatechange = function () {
    if(document.readyState == 'interactive'){
         player = document.getElementById("player");
         video_list = document.getElementById("video_list")
         
         maintainRatio();
    }
  }

  function maintainRatio() {
    var w = player.clientWidth;
    var h = (w * 9)/16;
    player.height = h;
    video_list.style.maxHeight = h + "px";
  }

  window.onresize = maintainRatio;
</script>

{% endblock %}
